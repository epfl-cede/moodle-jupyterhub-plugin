{"version":3,"sources":["../src/directorytree.js"],"names":["init","courseid","apinotebookpath","redirecttonoto_string","promises","ajax","call","methodname","args","done","response","warnings","length","every","w","warningcode","message","html","src","jQuery","parseJSON","result","jstree","val","on","e","data","selected","fail","ex","console","log","preventDefault","refreshpromises","settings","core","refresh"],"mappings":"4MAAA,OAEA,O,mDACO,GAAMA,CAAAA,CAAI,CAAG,SAACC,CAAD,CAAWC,CAAX,CAA4BC,CAA5B,CAAsD,CACtE,cAAE,UAAY,CACV,GAAIC,CAAAA,CAAQ,CAAGC,UAAKC,IAAL,CAAU,CACrB,CAAEC,UAAU,CAAE,uCAAd,CAAuDC,IAAI,CAAE,CAAEP,QAAQ,CAAEA,CAAZ,CAA7D,CADqB,CAAV,CAAf,CAGAG,CAAQ,CAAC,CAAD,CAAR,CAAYK,IAAZ,CAAiB,SAASC,CAAT,CAAmB,CAChC,GAA+B,CAA3B,CAAAA,CAAQ,CAACC,QAAT,CAAkBC,MAAtB,CAAkC,CAC9B,GAAID,CAAAA,CAAQ,CAAG,EAAf,CACAD,CAAQ,CAACC,QAAT,CAAkBE,KAAlB,CAAwB,SAASC,CAAT,CAAY,CAChCH,CAAQ,EAAIG,CAAC,CAACC,WAAF,CAAgB,IAAhB,CAAsBD,CAAC,CAACE,OAAxB,CAAkC,OACjD,CAFD,EAGA,cAAE,SAAF,EAAaC,IAAb,CAAkBN,CAAlB,CACH,CAND,IAMO,CACH,GAAIO,CAAAA,CAAG,CAAGC,MAAM,CAACC,SAAP,CAAiBV,CAAQ,CAACW,MAA1B,CAAV,CACA,cAAE,SAAF,EAAaC,MAAb,CAAoB,CAAE,KAAS,CACvB,KAASJ,CADc,CAAX,CAApB,EAGA,cAAE,kCAAF,EAAsCK,GAAtC,CAA0C,EAA1C,EACA,cAAE,oCAAF,EAAwCA,GAAxC,CAA4C,EAA5C,EACA,cAAE,SAAF,EAAaC,EAAb,CAAgB,gBAAhB,CAAkC,SAAUC,CAAV,CAAaC,CAAb,CAAmB,CACjD,cAAE,kCAAF,EAAsCH,GAAtC,CAA0CG,CAAI,CAACC,QAA/C,EACA,cAAE,6BAAF,EAAiCV,IAAjC,CAAsCS,CAAI,CAACC,QAA3C,EACA,cAAE,iCAAF,EAAqCV,IAArC,CAA0C,aAAcf,CAAd,CAAgCwB,CAAI,CAACC,QAArC,CAAgD,uBAAhD,CAAqExB,CAArE,CAA2F,MAArI,EACA,cAAE,oCAAF,EAAwCoB,GAAxC,CAA4CG,CAAI,CAACC,QAAjD,CACH,CALD,CAMH,CACJ,CArBD,EAqBGC,IArBH,CAqBQ,SAASC,CAAT,CAAa,CACjBC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAEH,CAxBD,EA0BA,cAAE,0CAAF,EAA8CL,EAA9C,CAAiD,OAAjD,CAA0D,SAASC,CAAT,CAAY,CAClEA,CAAC,CAACO,cAAF,GACA,GAAIC,CAAAA,CAAe,CAAG5B,UAAKC,IAAL,CAAU,CAC5B,CAAEC,UAAU,CAAE,uCAAd,CAAuDC,IAAI,CAAE,CAAEP,QAAQ,CAAEA,CAAZ,CAA7D,CAD4B,CAAV,CAAtB,CAGAgC,CAAe,CAAC,CAAD,CAAf,CAAmBxB,IAAnB,CAAwB,SAASC,CAAT,CAAmB,CACvC,GAAIQ,CAAAA,CAAG,CAAGC,MAAM,CAACC,SAAP,CAAiBV,CAAQ,CAACW,MAA1B,CAAV,CACA,GAAIH,CAAJ,CAAS,CACL,cAAE,SAAF,EAAaI,MAAb,KAA0BY,QAA1B,CAAmCC,IAAnC,CAAwCT,IAAxC,CAA+CR,CAA/C,CACA,cAAE,SAAF,EAAaI,MAAb,KAA0Bc,OAA1B,EACH,CACJ,CAND,EAMGR,IANH,CAMQ,SAASC,CAAT,CAAa,CACjBC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAEH,CATD,CAUH,CAfD,CAgBH,CA9CD,CA+CH,CAhDM,C","sourcesContent":["import $ from 'jquery';\nimport 'assignsubmission_noto/jstree';\nimport ajax from 'core/ajax';\nexport const init = (courseid, apinotebookpath, redirecttonoto_string) => {\n    $(function () {\n        var promises = ajax.call([\n            { methodname: 'assignsubmission_noto_get_jstree_json', args: { courseid: courseid} },\n        ]);\n        promises[0].done(function(response) {\n            if (response.warnings.length > 0) {\n                let warnings = '';\n                response.warnings.every(function(w) {\n                    warnings += w.warningcode + ': '+ w.message + '</br>';\n                });\n                $('#jstree').html(warnings);\n            } else {\n                var src = jQuery.parseJSON(response.result);\n                $('#jstree').jstree({ 'core' : {\n                        'data' : src\n                    }});\n                $(\"#assignsubmission_noto_directory\").val(\"\");\n                $(\"#assignsubmission_noto_directory_h\").val(\"\");\n                $('#jstree').on(\"changed.jstree\", function (e, data) {\n                    $(\"#assignsubmission_noto_directory\").val(data.selected);\n                    $(\"#assignsubmission_noto_path\").html(data.selected);\n                    $(\"#assignsubmission_noto_redirect\").html('<a href=\"' + apinotebookpath + data.selected + '\" target=\"_blank\">'+redirecttonoto_string+'</a>');\n                    $(\"#assignsubmission_noto_directory_h\").val(data.selected);\n                });\n            }\n        }).fail(function(ex) {\n            console.log(ex);\n            // do something with the exception\n        });\n\n        $(\"#assignsubmission_noto_reloadtree_submit\").on('click', function(e) {\n            e.preventDefault();\n            var refreshpromises = ajax.call([\n                { methodname: 'assignsubmission_noto_get_jstree_json', args: { courseid: courseid} },\n            ]);\n            refreshpromises[0].done(function(response) {\n                var src = jQuery.parseJSON(response.result);\n                if (src) {\n                    $('#jstree').jstree(true).settings.core.data = src;\n                    $('#jstree').jstree(true).refresh();\n                }\n            }).fail(function(ex) {\n                console.log(ex);\n                // do something with the exception\n            });\n        });\n    });\n};\n"],"file":"directorytree.min.js"}