define ("assignsubmission_noto/directorytree",["exports","jquery","assignsubmission_noto/jstree","core/ajax"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=e(b);d=e(d);function e(a){return a&&a.__esModule?a:{default:a}}var f=function(a,c,f){(0,b.default)(function(){var e=d.default.call([{methodname:"assignsubmission_noto_get_jstree_json",args:{courseid:a}}]);e[0].done(function(a){if(0<a.warnings.length){var e="";a.warnings.every(function(a){e+=a.warningcode+": "+a.message+"</br>"});(0,b.default)("#jstree").html(e)}else{var d=jQuery.parseJSON(a.result);(0,b.default)("#jstree").jstree({core:{data:d}});(0,b.default)("#assignsubmission_noto_directory").val("");(0,b.default)("#assignsubmission_noto_directory_h").val("");(0,b.default)("#jstree").on("changed.jstree",function(a,d){(0,b.default)("#assignsubmission_noto_directory").val(d.selected);(0,b.default)("#assignsubmission_noto_path").html(d.selected);(0,b.default)("#assignsubmission_noto_redirect").html("<a href=\""+c+d.selected+"\" target=\"_blank\">"+f+"</a>");(0,b.default)("#assignsubmission_noto_directory_h").val(d.selected)})}}).fail(function(a){console.log(a)});(0,b.default)("#assignsubmission_noto_reloadtree_submit").on("click",function(c){c.preventDefault();var e=d.default.call([{methodname:"assignsubmission_noto_get_jstree_json",args:{courseid:a}}]);e[0].done(function(a){var c=jQuery.parseJSON(a.result);if(c){(0,b.default)("#jstree").jstree(!0).settings.core.data=c;(0,b.default)("#jstree").jstree(!0).refresh()}}).fail(function(a){console.log(a)})})})};a.init=f});
//# sourceMappingURL=directorytree.min.js.map
